# Yi.Abp.Tool 功能演进分析与路线图

## 1. 现状评估
目前的 `Yi.Abp.Tool` 包含以下四个核心命令：
*   `new`: 创建项目/模块 (脚手架)。
*   `add-module`: 将模块集成到解决方案。
*   `clone`: 拉取源码。
*   `clear`: 清理编译文件。

**评价：**
*   **定位**: 目前处于 **“初始化工具 (Initializer)”** 阶段。
*   **优点**: 轻量、简单、解决了多层架构下手动创建项目和添加引用的繁琐问题。
*   **不足**: 缺乏对 **“全生命周期 (Lifecycle)”** 的支持。一旦项目创建完成，开发者在后续的编码、升级、前后端对接过程中，CLI 无法提供帮助。

---

## 2. ABP CLI 核心功能对比分析

ABP CLI 是一个非常成熟的工具，但对于 Yi Framework (SharpFort) 来说，大部分功能是冗余的。我们需要通过“剔除法”来筛选值得借鉴的功能。

| ABP CLI 命令 | 功能描述 | Yi Framework 借鉴价值 | 理由 |
| :--- | :--- | :--- | :--- |
| `new` | 创建项目 | ✅ 已拥有 | 现有功能已满足需求。 |
| `update` | **升级 NuGet 包版本** | ⭐ **极高** | **痛点**：在分层架构中，当框架发布新版本（如 1.0 -> 1.1）时，开发者需要手动修改十几个 `.csproj` 文件。此命令可自动化该过程。 |
| `generate-proxy` | **生成前端代理代码** | ⭐ **极高** | **痛点**：前后端分离开发中，后端写完 API，前端需要手写 TypeScript 类型和请求代码。此命令可读取 Swagger 自动生成 TS 代码，大幅提升效率。 |
| `add-module` | 添加模块 | ✅ 已拥有 | 现有功能已满足需求。 |
| `add-package` | 添加 NuGet 包到特定层 | ⚠️ 中等 | `dotnet add package` 已足够，除非框架有非常特殊的层级依赖规则，否则暂不需要。 |
| `login/logout` | 商业版登录 | ❌ 无需借鉴 | Yi 目前是开源项目，不需要鉴权逻辑。 |
| `suite` | 启动 GUI 代码生成器 | ❌ 太重了 | 维护成本过高，且容易产生垃圾代码。 |
| `translate` | 管理多语言资源 | ⚠️ 低 | 目前直接修改 JSON 即可，CLI 管理属于锦上添花。 |

---

## 3. 演进路线图建议 (Roadmap)

建议将 Tool 从“初始化工具”升级为“开发辅助工具”，按优先级实现以下功能：

### 第一阶段：维护性增强 (必须)

#### 1. `update` 命令 (强烈推荐)
*   **场景**: 框架发布了新版本 `Yi.Framework 2.0.0`。
*   **功能**: 扫描解决方案目录下所有的 `.csproj`，找到所有引用 `Yi.*` 或 `SharpFort.*` 的包，将其版本号更新到指定版本或最新版。
*   **命令设计**: 
    ```bash
    yi-abp update -v 2.0.0
    ```

### 第二阶段：生产力增强 (高价值)

#### 2. `generate-proxy` (API 代理生成)
*   **场景**: 后端写了一个 `BookAppService`。前端 Vue 项目需要调用它。
*   **功能**: 
    1. 连接后端 Swagger JSON (如 `/swagger/v1/swagger.json`)。
    2. 分析 API 定义。
    3. 在前端目录生成对应的 TypeScript 类型定义 (Interface) 和 API 请求函数 (Axios/Fetch)。
*   **命令设计**:
    ```bash
    yi-abp generate-proxy -t vue -u http://localhost:5000
    ```
*   **价值**: 这将是 Yi Framework 前后端分离开发的杀手级功能。

### 第三阶段：代码生成 (可选)

#### 3. `generate` (简单的 CRUD 生成)
*   **场景**: 快速生成一个新实体的标准代码结构。
*   **功能**: 仅生成后端代码（Entity, Dto, AppService, Repository）。不涉及 UI。
*   **命令设计**:
    ```bash
    yi-abp generate service Product
    ```
*   **注意**: 这是一个无底洞，建议只做最基础的模版替换，不要做得像 ABP Suite 那样复杂。

---

## 4. 总结与决策

**结论：**
目前的命令**不够用**，太过于侧重“开始”而忽略了“过程”。

**决策建议：**
1.  **保持轻量**: 坚决不引入 GUI (Suite) 和复杂的商业鉴权。
2.  **优先实现 `update`**: 这是解决多模块架构维护成本的各种痛点，实现难度低，收益高。
3.  **规划 `generate-proxy`**: 这是提升前后端协同效率的关键，能显著提升框架的现代化程度。

通过增加这两个命令，`Yi.Abp.Tool` 将从一个简单的“下载器”转变为一个真正的“生产力工具”。
